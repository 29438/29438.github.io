(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{1065:function(t,e,n){t.exports=n(1066)},1066:function(t,e,n){var s=n(1067);t.exports=s},1067:function(t,e,n){n(1068);var s=n(17);t.exports=s.parseFloat},1068:function(t,e,n){var s=n(9),i=n(1069);s({global:!0,forced:parseFloat!=i},{parseFloat:i})},1069:function(t,e,n){var s=n(18),i=n(864).trim,a=n(863),o=s.parseFloat,r=1/o(a+"-0")!=-1/0;t.exports=r?function(t){var e=i(String(t)),n=o(e);return 0===n&&"-"==e.charAt(0)?-0:n}:o},1070:function(t,e,n){"use strict";n(974)},1071:function(t,e,n){"use strict";n(975)},1090:function(t,e,n){"use strict";var s=n(46),i=n.n(s),a={props:{item:{type:Object,default:{}},index:{type:Number}},data:function(){return{}},components:{},computed:{show_answer:{get:function(){return this.$store.state.showAnswer}},TypeText:function(){return{1:this.$t("Exam.Common.Single"),2:this.$t("Exam.Common.Multiply"),3:this.$t("Exam.Common.Poll"),4:this.$t("Exam.Common.Blank"),5:this.$t("Exam.Common.Short"),6:this.$t("Exam.Common.Judge"),9:this.$t("Exam.Common.Program")}}},mounted:function(){},methods:{previewPics:function(t,e){this.$emit("previewPic",t,e)},checkAnno:function(t,e){this.$emit("checkAnno",t,e)},downloadAttach:function(t,e){var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="blob",n.onload=function(e){var s=window.URL.createObjectURL(n.response),i=document.createElement("a");i.href=s,i.download=t,i.click()},n.send()},toggle:function(t){t.isOpen=!t.isOpen},toResult:function(t){var e,n=window.location.origin,s=i()(e="".concat(t,"&callback_url_prefix=")).call(e,encodeURIComponent(n),"/");window.open(s,"_blank")}}},o=n(25),r=Object(o.a)(a,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"result_item"},[n("div",{staticClass:"item-type"},[t._v("\n      "+t._s(t.index+1)+"."+t._s(t.TypeText[t.item.ProblemType])+"\n      "),t._v(" "),3===t.item.ProblemType?n("span",[t._v(t._s(t.item.voteMode?t.$t("Exam.Exam.Multiply"):t.$t("Exam.Exam.Single")))]):t._e(),t._v(" "),3!==t.item.ProblemType||3===t.item.ProblemType&&t.item.isScore?n("span",[t._v("("+t._s(t.item.score)+t._s(t.$t("CourseAction.Common.Point"))+")")]):n("span",[t._v("("+t._s(t.$t("Exam.Exam.NoScore"))+")")])]),t._v(" "),n("div",{staticClass:"item-body"},[9===t.item.ProblemType?n("div",{staticClass:"item-title"},[t._v("\n        "+t._s(t.$t("Title"))),t._v(":"),n("span",{domProps:{innerHTML:t._s(t.item.title)}})]):t._e(),t._v(" "),4===t.item.ProblemType?n("div",{domProps:{innerHTML:t._s(t.changeBase64ToLatex(t.item.Body))}}):n("h4",{domProps:{innerHTML:t._s(t.changeBase64ToLatex(t.item.Body))}}),t._v(" "),1===t.item.ProblemType?n("ul",{staticClass:"list-unstyled list-unstyled-radio"},t._l(t.item.Options,(function(e,s){return n("li",[n("el-radio",{attrs:{name:"radio"+s,label:e.key,disabled:!0},model:{value:t.item.result[0],callback:function(e){t.$set(t.item.result,0,e)},expression:"item.result[0]"}},[n("span",{staticClass:"radioInput"},[t._v("\n              "+t._s(e.showKey)+"\n              "),t._v(" "),t.show_answer?[t.item.correct||e.key!=t.item.result[0]?t._e():n("div",{staticClass:"dot dot-danger"},[n("span",{staticClass:"el-icon-close"})]),t._v(" "),t.item.Answer&&e.key==t.item.Answer[0]?n("div",{staticClass:"dot dot-success"},[n("span",{staticClass:"el-icon-check"})]):t._e()]:t._e()],2),t._v(" "),n("span",{staticClass:"radioText",domProps:{innerHTML:t._s(t.changeBase64ToLatex(e.value))}})])],1)})),0):t._e(),t._v(" "),2===t.item.ProblemType||3===t.item.ProblemType?n("ul",{staticClass:"list-unstyled list-unstyled-checkbox"},t._l(t.item.Options,(function(e,s){return n("li",{key:e.key},[n("el-checkbox",{attrs:{label:e.key,disabled:""},model:{value:t.item.result,callback:function(e){t.$set(t.item,"result",e)},expression:"item.result"}},[n("span",{staticClass:"checkboxInput"},[t._v("\n              "+t._s(e.showKey)+"\n              "),t._v(" "),t.show_answer?[3===t.item.ProblemType&&t.item.result&&t.item.result.length&&-1!=t.item.result.indexOf(e.key)?n("div",{staticClass:"dot dot-success"},[n("span",{staticClass:"el-icon-check"})]):t._e(),t._v(" "),2===t.item.ProblemType&&t.item.result&&t.item.result.length&&-1!=t.item.result.indexOf(e.key)&&t.item.Answer&&-1==t.item.Answer.indexOf(e.key)?n("div",{staticClass:"dot dot-danger"},[n("span",{staticClass:"el-icon-close"})]):t._e(),t._v(" "),2===t.item.ProblemType&&t.item.Answer&&-1!=t.item.Answer.indexOf(e.key)?n("div",{staticClass:"dot dot-success"},[n("span",{staticClass:"el-icon-check"})]):t._e()]:t._e()],2),t._v(" "),n("span",{staticClass:"checkboxText",domProps:{innerHTML:t._s(t.changeBase64ToLatex(e.value))}})])],1)})),0):t._e(),t._v(" "),6===t.item.ProblemType?n("ul",{staticClass:"list-inline list-unstyled-radio"},t._l(t.item.Options,(function(e,s){return n("li",{key:e.key},[n("el-radio",{attrs:{name:"radio"+s,label:e.key,disabled:""},model:{value:t.item.result[0],callback:function(e){t.$set(t.item.result,0,e)},expression:"item.result[0]"}},[n("span",{staticClass:"radioInput fz20"},["true"==e.key?n("i",{staticClass:"el-icon-check"}):n("i",{staticClass:"el-icon-close"}),t._v(" "),t.show_answer?[t.item.Answer&&t.item.result==e.key&&t.item.result!=t.item.Answer[0]?n("div",{staticClass:"dot dot-danger"},[n("span",{staticClass:"el-icon-close"})]):t._e(),t._v(" "),t.item.Answer&&e.key==t.item.Answer[0]?n("div",{staticClass:"dot dot-success"},[n("span",{staticClass:"el-icon-check"})]):t._e()]:t._e()],2)])],1)})),0):t._e(),t._v(" "),5===t.item.ProblemType?n("div",{},[n("p",{staticStyle:{"margin-bottom":"10px"}},[t._v("\n          "+t._s(t.$t("Exam.Result.MyAnswer")))]),t._v(" "),t.item.result&&""!=t.item.result?t.item.remark_detail&&t.item.remark_detail.content?n("div",[n("div",{staticClass:"subject-answer J_html",attrs:{"data-item":JSON.stringify(t.item)},domProps:{innerHTML:t._s(t.item.remark_detail.content)}})]):n("div",{staticClass:"subject-answer",domProps:{innerHTML:t._s(t.item.result)}}):[n("div",{},[t._v("\n            "+t._s(t.$t("None")))])],t._v(" "),n("div",{staticStyle:{margintop:"20px"}},[t.item.pics&&t.item.pics.length?n("div",{staticClass:"pic-default"},[n("ul",{staticClass:"pic-list"},t._l(t.item.pics,(function(e){return n("li",{key:e.fileUrl},[n("span",{staticClass:"pic-item",class:[e.hasAnno?"anno-tag":""],on:{click:function(n){return t.previewPics(e,t.item)}}},[n("img",{attrs:{src:e.fileUrl}})]),t._v(" "),e.hasAnno?n("span",{staticClass:"pic-annotation",on:{click:function(n){return t.checkAnno(e,t.item)}}},[n("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[n("use",{attrs:{"xlink:href":"#icon--xiaochicunjingshi"}})]),t._v("\n                  "+t._s(t.$t("Seeannotation"))+"\n                ")]):t._e()])})),0)]):t._e(),t._v(" "),t.item.attachments&&t.item.attachments.filelist&&t.item.attachments.filelist.length?n("div",{staticClass:"attachmentShowComponent"},[n("div",{staticClass:"attachmentInfo"},[n("span",{staticClass:"attachment_icon"},[/^wav|mp3$/gi.test(t.item.attachments.filelist[0].fileType)?n("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[n("use",{attrs:{"xlink:href":"#icon--yinpin1"}})]):n("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[n("use",{attrs:{"xlink:href":"#icon--"+t.item.attachments.filelist[0].fileType}})])]),t._v(" "),n("div",{},[n("p",{staticClass:"attachment_name"},[t._v("\n                  "+t._s(t.item.attachments.filelist[0].fileName)+"\n                ")]),t._v(" "),t.item.attachments.filelist[0].fileUrl?n("p",{staticClass:"attachment_size"},[t._v("\n                  "+t._s(t.item.attachments.filelist[0].fileSize)+"\n                ")]):n("p",{staticStyle:{color:"#f84f41","margin-left":"10px","font-size":"12px"}},[t._v("\n                  上传失败\n                ")])])]),t._v(" "),t.item.attachments.filelist[0].fileUrl?n("a",{staticClass:"download_file",attrs:{target:"_blank"},on:{click:function(e){return t.downloadAttach(t.item.attachments.filelist[0].fileName,t.item.attachments.filelist[0].fileUrl)}}},[t._v(t._s(t.$t("Download")))]):t._e()]):t._e()])],2):t._e()]),t._v(" "),t.show_answer?n("div",{staticClass:"item-footer",class:{nopadding:5==t.item.ProblemType&&!t.item.score_finish&&!t.item.Remark||9==t.item.ProblemType&&!t.item.score_finish}},[(5==t.item.ProblemType||9==t.item.ProblemType)&&t.item.score_finish||5!=t.item.ProblemType&&9!=t.item.ProblemType?n("div",[t._v("\n        "+t._s(t.$t("Exam.Result.ItemGrade"))),t._v(t._s(t.item.grade?t.item.grade:0)+t._s(t.$t("CourseAction.Common.Point")))]):t._e(),t._v(" "),5==t.item.ProblemType&&t.item.score_finish&&t.item.comment&&Object.keys(t.item.comment).length&&t.item.comment.content?n("div",[t._v(t._s(t.$t("Exam.Result.Comment"))+t._s(t.item.comment.content)+"\n      ")]):t._e(),t._v(" "),n("div",{staticClass:"item-footer--header"},[!t.item.showAnswer||1!=t.item.ProblemType&&2!=t.item.ProblemType?t._e():n("div",[n("span",[t._v(t._s(t.$t("Exam.Result.RightAnswer")))]),t._v(" "),n("span",[t._v(t._s(t.item.showAnswer)+"\n            "),t._v(" "),2==t.item.ProblemType?n("span",[t._v("("+t._s(t.item.HalfScore?t.$t("Exam.Result.Tips2"):t.$t("Exam.Result.Tips1"))+")")]):t._e()])]),t._v(" "),t.item.Blanks&&4==t.item.ProblemType?n("div",[n("div",[n("span",[t._v(t._s(t.$t("Exam.Result.RightAnswer")))]),t._v(" "),t.item.OrderInsensitive?n("span",{staticClass:"orderInsensitive-dot"},[t._v(t._s(t.$t("Exam.Result.Tips3")))]):t._e()]),t._v(" "),n("ul",{staticClass:"list-unstyled problem-options"},t._l(t.item.Blanks,(function(e,s){return n("li",{key:e.Num},[e.CaseSensitive?n("div",{staticClass:"dot"},[t._v("\n                "+t._s(t.$t("Exam.Result.Tips4")))]):t._e(),t._v(" "),n("span",{staticStyle:{"font-weight":"bold"}},[t._v("填空"+t._s(e.Num)+"\n                "),t._v("\n                :")]),t._v(" "),n("span",[t._v(t._s(e.Answers.join(" / ")))])])})),0)]):t._e(),t._v(" "),t.item.Answer&&6==t.item.ProblemType?n("div",[n("span",[t._v(t._s(t.$t("Exam.Result.RightAnswer")))]),t._v(" "),n("span",[t._v(t._s({true:t.$t("Right"),false:t.$t("Wrong")}[t.item.Answer[0]]))])]):t._e()]),t._v(" "),t.item.Remark?n("div",[n("div",{staticClass:"item-footer--more",on:{click:function(e){return t.toggle(t.item)}}},[t._v("\n          "+t._s(t.item.isOpen?t.$t("Exam.Result.CloseAnalysis"):t.$t("Exam.Result.SeekAnalysis"))+"\n          "),n("i",{class:{"el-icon-arrow-down":!t.item.isOpen,"el-icon-arrow-up":t.item.isOpen}})]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.item.isOpen,expression:"item.isOpen"}],staticClass:"item-footer--body"},[t.item.Remark?n("div",{domProps:{innerHTML:t._s(t.changeBase64ToLatex(t.item.Remark))}}):n("div",[t._v("\n            "+t._s(t.$t("None")))])])]):t._e()]):t._e(),t._v(" "),9===t.item.ProblemType&&t.item.answer_result_url?n("div",{staticClass:"oj-section"},[n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.toResult(t.item.answer_result_url)}}},[t._v(t._s(t.$t("Exam.Result.SeekSubmitDetail")))])],1):t._e()])}),[],!1,null,"3bc173af",null);e.a=r.exports},1106:function(t,e,n){"use strict";n.r(e);var s=n(928).a,i=(n(1070),n(1071),n(25)),a=Object(i.a)(s,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"exam exam-result"},[t.has_problem_dict?n("dictsAside",{attrs:{problems:t.problems,finalResult:t.finalResult,isResult:!0},on:{scroll:t.scroll}}):n("examAside",{attrs:{problems:t.problems,subjectivePro:t.subjectivePro,objectivePro:t.objectivePro,ojPro:t.ojPro,isResult:!0,totalGrade:t.grade},on:{scroll:t.scroll}}),t._v(" "),n("el-scrollbar",{staticStyle:{height:"100%"},attrs:{native:!0,noresize:!1}},[n("div",{staticClass:"exam-main"},[t.isShow?n("div",{staticClass:"loading-box"},[n("div",{staticClass:"clearfix loading-wrapper"},[n("svg",{staticClass:"icon f20 fl",attrs:{"aria-hidden":"true"}},[n("use",{attrs:{"xlink:href":"#icon--jiazaiwubaidi"}})]),t._v(" "),n("div",{staticClass:"fl loading-text"},[t._v(t._s(t.$t("Loading")))])])]):t._e(),t._v(" "),!t.isShow&&t.problems.length?n("div",{staticClass:"exam-main--body"},[t.has_problem_dict?n("div",t._l(t.problems,(function(e){return n("div",{key:e.order,ref:"dicts"+e.order,refInFor:!0,staticClass:"dict_list"},[e.problems.length?n("div",[n("div",{staticClass:"dict_title"},[t._v("\n                "+t._s(e.title)+"\n                "),n("span",[t._v("(共 "+t._s(e.count)+" 题，满分 "+t._s(e.totalScore)+" 分)")])]),t._v(" "),t._l(e.problems,(function(e,s){return n("section",{key:s,staticClass:"subject-item"},[n("result-item",{attrs:{item:e,index:s},on:{previewPic:t.previewPic,checkAnno:t.checkAnno}})],1)}))],2):t._e()])})),0):n("div",{ref:"nodicts"},t._l(t.problems,(function(e,s){return n("div",{key:e.sortId,staticClass:"subject-item"},[n("result-item",{attrs:{item:e,index:s},on:{previewPic:t.previewPic,checkAnno:t.checkAnno}})],1)})),0)]):t._e()])]),t._v(" "),n("annotation-cmp",{attrs:{visible:t.visibleAnno,anno:t.anno},on:{"update:visible":function(e){t.visibleAnno=e},"update:anno":function(e){t.anno=e}}})],1)}),[],!1,null,null,null);e.default=a.exports},866:function(t,e,n){t.exports=n(871)},868:function(t,e,n){"use strict";(function(t){e.a={name:"annotation",props:{anno:{type:Object,default:null},visible:{type:Boolean,default:!1}},data:function(){return{}},watch:{visible:function(t,e){4===this.activityType&&t&&document.body.appendChild(this.$el)}},methods:{handleClosed:function(){this.$emit("update:visible",!1)},handleView:function(t){t.preventDefault(),t.stopPropagation();var e=t.target.src;"undefined"!=typeof wx&&wx.previewImage({current:e,urls:[e]})},launchIntoFullscreen:function(t){t.requestFullscreen?t.requestFullscreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.msRequestFullscreen&&t.msRequestFullscreen()},exitFullscreen:function(){document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()}},created:function(){},ready:function(){t(this.$el).css({height:t(window).height()})},destroyed:function(){}}}).call(this,n(68))},871:function(t,e,n){var s=n(872);t.exports=s},872:function(t,e,n){n(873);var s=n(17);t.exports=s.Object.assign},873:function(t,e,n){var s=n(9),i=n(874);s({target:"Object",stat:!0,forced:Object.assign!==i},{assign:i})},874:function(t,e,n){"use strict";var s=n(22),i=n(20),a=n(128),o=n(365),r=n(300),l=n(86),c=n(360),m=Object.assign,u=Object.defineProperty;t.exports=!m||i((function(){if(s&&1!==m({b:1},m(u({},"a",{enumerable:!0,get:function(){u(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},n=Symbol();return t[n]=7,"abcdefghijklmnopqrst".split("").forEach((function(t){e[t]=t})),7!=m({},t)[n]||"abcdefghijklmnopqrst"!=a(m({},e)).join("")}))?function(t,e){for(var n=l(t),i=arguments.length,m=1,u=o.f,d=r.f;i>m;)for(var p,f=c(arguments[m++]),v=u?a(f).concat(u(f)):a(f),h=v.length,_=0;h>_;)p=v[_++],s&&!d.call(f,p)||(n[p]=f[p]);return n}:m},880:function(t,e,n){},898:function(t,e,n){t.exports=n(899)},899:function(t,e,n){var s=n(900);t.exports=s},900:function(t,e,n){var s=n(901),i=Array.prototype;t.exports=function(t){var e=t.findIndex;return t===i||t instanceof Array&&e===i.findIndex?s:e}},901:function(t,e,n){n(902);var s=n(56);t.exports=s("Array").findIndex},902:function(t,e,n){"use strict";var s=n(9),i=n(88).findIndex,a=n(363),o=n(67),r=!0,l=o("findIndex");"findIndex"in[]&&Array(1).findIndex((function(){r=!1})),s({target:"Array",proto:!0,forced:r||!l},{findIndex:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),a("findIndex")},923:function(t,e,n){"use strict";(function(t){var s=n(69),i=n.n(s),a={methods:{initEvent:function(){var e=this,n=t(".J_html");n&&n.on("click",".js-remark",(function(n){var s=n.target,i=t(s);e.annotations=t(s.parentNode.parentNode).data("item").annotations;var a=i.data("uuid")||t(s.parentNode).data("uuid"),o=e.findAnno(a);o&&(e.anno=o,e.visibleAnno=!0)}))},viewAnno:function(t){var e=this.findAnno(t);this.anno=e,this.visibleAnno=!0},findAnno:function(t){var e;return i()(e=this.annotations).call(e,(function(e){return t===e.id}))}}};e.a=a}).call(this,n(68))},924:function(t,e,n){"use strict";n(880)},928:function(t,e,n){"use strict";(function(t){var s=n(90),i=n.n(s),a=n(91),o=n.n(a),r=n(48),l=n.n(r),c=n(49),m=n.n(c),u=n(26),d=n.n(u),p=n(50),f=n.n(p),v=n(124),h=n.n(v),_=n(46),b=n.n(_),g=n(89),w=n.n(g),x=n(19),y=n.n(x),k=n(865),C=n.n(k),A=n(959),P=n.n(A),$=n(898),T=n.n($),E=n(1065),j=n.n(E),R=n(870),S=n.n(R),O=n(11),N=n.n(O),F=n(69),I=n.n(F),M=n(0),U=n.n(M),B=n(866),L=n.n(B),H=n(36),q=n.n(H),J=n(130),z=n.n(J),D=n(986),G=n(984),K=n(1090),V=n(58),X=n(923),Q=n(932);function W(t,e){var n=w()(t);if(f.a){var s=f()(t);e&&(s=d()(s).call(s,(function(e){return m()(t,e).enumerable}))),n.push.apply(n,s)}return n}function Y(t){for(var e=1;e<arguments.length;e++){var n,s=null!=arguments[e]?arguments[e]:{};if(e%2)q()(n=W(Object(s),!0)).call(n,(function(e){U()(t,e,s[e])}));else if(l.a)o()(t,l()(s));else{var a;q()(a=W(Object(s))).call(a,(function(e){i()(t,e,m()(s,e))}))}}return t}e.a={name:"examResult",data:function(){return{problems:[],problem_dics:[],paperName:"",has_problem_dict:!1,subjectivePro:{num:"-",answerNum:"-",score:"-"},objectivePro:{num:"-",answerNum:"-",score:"-"},ojPro:{num:"-",answerNum:"-",score:"-"},reg:/<span class="blank-item".*?>.+?<\/span>/gi,isResult:!1,finalResult:[],grade:0,exam_id:this.$route.params.examid,isShow:!0,isFrom:this.$route.query.isFrom,dialogImageUrl:"",dialogImageVisible:!1,annotations:[],anno:null,visibleAnno:!1}},beforeCreate:function(){this.$store.commit("changeIsResult",!0)},mounted:function(){this.mergeAnswer()},watch:{problems:function(t,e){this.$nextTick((function(){"MathJax"in window&&window.MathJax.Hub.Queue(["Typeset",MathJax.Hub])}))}},computed:{show_score:{get:function(){return this.$store.state.showScore}},show_answer:{get:function(){return this.$store.state.showAnswer}},TypeText:function(){return{1:this.$t("Exam.Common.Single"),2:this.$t("Exam.Common.Multiply"),3:this.$t("Exam.Common.Poll"),4:this.$t("Exam.Common.Blank"),5:this.$t("Exam.Common.Short"),6:this.$t("Exam.Common.Judge"),9:this.$t("Exam.Common.Program")}}},methods:{optionsItemhandle:function(t){return String.fromCharCode(65+t)},getExamData:function(){var t=this;this.$axios.get(V.a.show_paper,{params:{exam_id:this.exam_id}}).then((function(e){if(0==e.data.errcode){t.isShow=!1;var n=e.data.data,s=n.problems,i=n.has_problem_dict,a=n.title;n.total_score;if(t.has_problem_dict=i,t.paperName=a,t.$store.commit("paperName",a),t.has_problem_dict)t.problems=z()(s).call(s,(function(e,n){var s,i=e.problems.length,a=0,o=0;e.problems.length&&q()(s=e.problems).call(s,(function(n,s){a+=n.score;var i=t.formatExercise(n,s,t.finalResult,o);o=i.answerNum,L()(n,i.item,{parent_order:e.order})}));return Y(Y({},e),{},{count:i,totalScore:a,answerNum:o})})),console.log("this.problems"),console.log(t.problems);else{t.subjectivePro={num:0,score:0,answerNum:0,grade:0},t.objectivePro={num:0,score:0,answerNum:0,grade:0},t.ojPro={num:0,score:0,answerNum:0,grade:0},q()(s).call(s,(function(e,n){var s,i=e.Type,a=e.problem_id,o=e.Answer,r=e.Options,l=I()(s=t.finalResult).call(s,(function(t){return t.problem_id==a}))||{};if("SingleChoice"===i||"MultipleChoice"===i||"Polling"===i||"Judgement"===i){var c=l.result,m=l.showAnswer,u=l.answer;c=c instanceof Array?c:[],m=m instanceof Array?m:[],o=o instanceof Array?o:[],u=u instanceof Array?u:[],r=r instanceof Array?r:[],o=u,r=z()(r).call(r,(function(e,n){var s=e.value,i=e.key,a=t.optionsItemhandle(n);return N()(o).call(o,i)>-1&&m.push(a),{value:s,key:i,showKey:a}})),m=m.length>1?S()(m).call(m).join():m.join(),L()(l,{result:c,showAnswer:m})}if(L()(e,l,{Answer:o,Options:r,isOpen:!1,sortId:n+1}),"ShortAnswer"===i){var d,p=t.subjectivePro,f=p.num,v=p.score,h=p.grade,_=p.answerNum;if(f++,v+=j()(e.score),e.grade>0&&(h+=j()(e.grade)),e.result){var g=e.result,x=g.content,k=g.pics,A=g.attachments;e.result=x,(x||A&&A.filelist.length>0||k&&k.length>0)&&(t.$set(e,"isAnswered",!0),_++),L()(t.subjectivePro,{num:f,score:Number(v.toFixed(1)),grade:Number(h.toFixed(1)),answerNum:_}),L()(e,{pics:k,attachments:A})}if(e.remark_detail&&e.remark_detail.remark_list)t.$set(e,"annotations",e.remark_detail.remark_list||[]),q()(d=e.annotations).call(d,(function(t){if("single_pic"===t.type){var n=t.id;if(e.pics){var s,i=T()(s=e.pics).call(s,(function(t){return t.fileUrl===n||P()(n).call(n,t.fileUrl)}));if(i>=0){var a,o=e.pics[i];o.hasAnno=!0,C()(a=e.pics).call(a,i,1,o)}}}})),y()((function(){t.initEvent()}),100)}else if("ProgramProblem"===i){var $=t.ojPro,E=$.num,R=$.score,O=$.grade,F=$.answerNum;E++,R+=j()(e.score),e.grade>0&&(O+=j()(e.grade)),e.result&&0!==w()(e.result).length&&F++,t.ojPro={num:E,score:Number(R.toFixed(1)),grade:Number(O.toFixed(1)),answerNum:F}}else{var M=t.objectivePro,U=M.num,B=M.score,H=M.grade,J=M.answerNum;if(U++,B+=j()(e.score),e.grade>0&&(H+=j()(e.grade)),e.result&&0!==w()(e.result).length&&J++,t.objectivePro={num:U,score:Number(B.toFixed(1)),grade:Number(H.toFixed(1)),answerNum:J},4==e.ProblemType){var D=0,G=e.Body.replace(/<span class="blank-item".*?>.+?<\/span>/gi,(function(n){var s,i,a=e.correct_blanks instanceof Array?e.correct_blanks:[],o=e.result&&e.result[++D]||'<span class="danger">未作答</span>',r=!!e.correct||N()(a).call(a,D)>-1||N()(a).call(a,D+"")>-1,l=r?"success":"danger",c=r?'<span class="dot dot-success"><span class="el-icon-check"></span></span>':'<span class="dot dot-danger"><span class="el-icon-close"></span></span>';return t.show_answer?b()(s=b()(i='<span class="blank-item-dynamic '.concat(l,'">\n\t\t\t\t\t\t\t\t\t\t\t\t')).call(i,c," ")).call(s,o,"\n\t\t\t\t\t\t\t\t\t\t\t</span>"):'<span class="blank-item-dynamic">\n\t\t\t\t\t\t\t\t\t\t\t\t'.concat(o,"\n\t\t\t\t\t\t\t\t\t\t\t</span>")}));e.Body=G}}}));var o=s.length;t.$store.commit("setPaperNum",o),t.problems=s,console.log(s)}}else{var r=e.data.errmsg,l=e.data.errcode,c=t.$createElement;t.$msgbox({title:"提示",center:!0,roundButton:!0,customClass:"btnStartMessage",message:c("div",null,[c("div",r)]),showCancelButton:!1,confirmButtonText:"确认",callback:function(e){var n,s;"confirm"==e&&(10107==l?t.$router.push({path:b()(n="/exam/".concat(t.exam_id,"?isFrom=")).call(n,t.isFrom)}):t.$router.push({path:b()(s="/cover/".concat(t.exam_id,"?isFrom=")).call(s,t.isFrom)}))}})}})).catch((function(t){console.log(t)}))},formatExercise:function(t,e,n,s){var i=this,a=t.Type,o=t.problem_id,r=t.Answer,l=t.Options,c=I()(n).call(n,(function(t){return t.problem_id==o}))||{};if("SingleChoice"===a||"MultipleChoice"===a||"Polling"===a||"Judgement"===a){var m=c.result,u=c.showAnswer,d=c.answer;m=m instanceof Array?m:[],u=u instanceof Array?u:[],r=r instanceof Array?r:[],d=d instanceof Array?d:[],l=l instanceof Array?l:[],r=d,l=z()(l).call(l,(function(t,e){var n=t.value,s=t.key,a=i.optionsItemhandle(e);return N()(r).call(r,s)>-1&&u.push(a),{value:n,key:s,showKey:a}})),u=u.length>1?S()(u).call(u).join():u.join(),L()(c,{result:m,showAnswer:u})}if(L()(t,c,{Answer:r,Options:l,isOpen:!1,sortId:e+1}),"ShortAnswer"===a){if(t.result){var p=t.result,f=p.content,v=p.pics,h=p.attachments;t.result=f,(f||h&&h.filelist.length>0||v&&v.length>0)&&(this.$set(t,"isAnswered",!0),s++),L()(t,{pics:v,attachments:h})}var _;if(t.remark_detail&&t.remark_detail.remark_list)this.$set(t,"annotations",t.remark_detail.remark_list||[]),q()(_=t.annotations).call(_,(function(e){if("single_pic"===e.type){var n=e.id;if(t.pics){var s,i=T()(s=t.pics).call(s,(function(t){return t.fileUrl===n||P()(n).call(n,t.fileUrl)}));if(i>=0){var a,o=t.pics[i];o.hasAnno=!0,C()(a=t.pics).call(a,i,1,o)}}}})),y()((function(){i.initEvent()}),100)}else if("ProgramProblem"===a)t.result&&0!==w()(t.result).length&&s++;else if(t.result&&0!==w()(t.result).length&&s++,4==t.ProblemType){var g=0,x=t.Body.replace(/<span class="blank-item".*?>.+?<\/span>/gi,(function(e){var n,s,a=t.correct_blanks instanceof Array?t.correct_blanks:[],o=t.result&&t.result[++g]||'<span class="danger">未作答</span>',r=!!t.correct||N()(a).call(a,g)>-1||N()(a).call(a,g+"")>-1,l=r?"success":"danger",c=r?'<span class="dot dot-success"><span class="el-icon-check"></span></span>':'<span class="dot dot-danger"><span class="el-icon-close"></span></span>';return i.show_answer?b()(n=b()(s='<span class="blank-item-dynamic '.concat(l,'">\n\t\t\t\t\t\t\t\t\t\t\t\t')).call(s,c," ")).call(n,o,"\n\t\t\t\t\t\t\t\t\t\t\t</span>"):'<span class="blank-item-dynamic">\n\t\t\t\t\t\t\t\t\t\t\t\t'.concat(o,"\n\t\t\t\t\t\t\t\t\t\t\t</span>")}));t.Body=x}return{item:t,answerNum:s}},toggle:function(t){t.isOpen=!t.isOpen},downloadAttach:function(t,e){var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="blob",n.onload=function(e){var s=window.URL.createObjectURL(n.response),i=document.createElement("a");i.href=s,i.download=t,i.click()},n.send()},getEditorId:function(t){return{index:t}},mergeAnswer:function(){var t=this;this.getProblemResult().then((function(){t.getExamData()}))},scroll:function(e,n){if(console.log("scroll",e,n),null!=e){var s=this.$refs["dicts"+e][0];if(s){var i=(s.querySelectorAll(".subject-item")||[])[--n];if(i){var a=t(i).offset().top-50;t("html,body").animate({scrollTop:a},1e3)}}}else{var o=this.$refs.nodicts;if(o){var r=(o.querySelectorAll(".subject-item")||[])[--n];if(r){a=t(r).offset().top-50;console.log(a),t("html,body").animate({scrollTop:a},1e3)}}}},getProblemResult:function(){var t=this;return new h.a((function(e,n){t.$axios.get(V.a.problem_results,{params:{exam_id:t.exam_id}}).then((function(n){if(0==n.data.errcode){t.finalResult=n.data.data.problem_results;var s=n.data.data.duration;t.grade=n.data.data.grade,t.$store.commit("getDuration",s),e(1)}else{var i=n.data.errmsg,a=n.data.errcode,o=t.$createElement;t.$msgbox({title:"提示",center:!0,roundButton:!0,customClass:"btnStartMessage",message:o("div",null,[o("div",i)]),showCancelButton:!1,confirmButtonText:"确认",callback:function(e){var n,s;"confirm"==e&&(10107==a?t.$router.push({path:b()(n="/exam/".concat(t.exam_id,"?isFrom=")).call(n,t.isFrom)}):t.$router.push({path:b()(s="/cover/".concat(t.exam_id,"?isFrom=")).call(s,t.isFrom)}))}})}})).catch((function(t){console.log(t)}))}))},previewPic:function(t,e){if(this.findAnno&&t.fileUrl&&e.annotations&&(this.annotations=e.annotations,this.findAnno(t.fileUrl)))return this.viewAnno(t.fileUrl),this;var n="<img src='".concat(t.fileUrl,"' />");this.$alert(n,{dangerouslyUseHTMLString:!0,customClass:"imageDialog",showClose:!1,showConfirmButton:!1,closeOnClickModal:!0}).then((function(){})).catch((function(){}))},checkAnno:function(t,e){if(this.findAnno&&t.fileUrl&&e.annotations&&(this.annotations=e.annotations,this.findAnno(t.fileUrl)))return this.viewAnno(t.fileUrl),this},toResult:function(t){var e,n=window.location.origin,s=b()(e="".concat(t,"&callback_url_prefix=")).call(e,encodeURIComponent(n),"/");window.open(s,"_blank")}},components:{examAside:D.a,annotationCmp:Q.a,dictsAside:G.a,resultItem:K.a},mixins:[X.a]}}).call(this,n(68))},932:function(t,e,n){"use strict";var s=n(868).a,i=(n(924),n(25)),a=Object(i.a)(s,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],staticClass:"annotation",attrs:{"aria-page":"annotation-page"},on:{click:function(e){return e.target!==e.currentTarget?null:t.handleClosed(e)}}},[n("section",{staticClass:"annotation__box"},[n("header",{staticClass:"annotation--title"},[t._v(t._s(t.$t("Annotation")))]),t._v(" "),t.anno&&t.anno.content?n("article",{},[n("section",{staticClass:"annotation--text"},[t._v(t._s(t.anno.content.text))]),t._v(" "),n("img",{staticClass:"annotation--image",attrs:{src:t.anno.content.pic,alt:""},on:{click:t.handleView}})]):t._e(),t._v(" "),n("p",{staticClass:"annotation--close",on:{click:t.handleClosed}},[n("svg",{staticClass:"icon f25",attrs:{"aria-hidden":"true"}},[n("use",{attrs:{"xlink:href":"#icon--shoujiguanbi"}})])])])])}),[],!1,null,null,null);e.a=a.exports},974:function(t,e,n){},975:function(t,e,n){}}]);